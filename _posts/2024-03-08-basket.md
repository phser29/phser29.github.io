---
layout: single
title: "react-basket"
categories: javaScript
tag: react
toc: true
---

# (JSON) 쇼핑몰 장바구니

## JSON 상품 출력
```
// 훅으로 상품 지속적으로 출력
useEffect(() => {
  axios.get("/data/products.json").then(data => {
    setProduct(data.data.products.find((product) => product.id === parseInt(id)))
  })
}, [id]);


```
## 장바구니 추가
```
const handleCart = () => {
  const cartItem = {
    id: product.id,
    image: product.image,
    name: product.name,
    price: product.price,
    provider: product.provider,
    quantity: count
  }
  // 장바구니 cartItem와 일치하는 cart.id가 있으면 카운트 증가 및 상품 담기
  const found = cart.find((el) => el.id === cartItem.id);
  if(found) {
    setQuantity(cartItem.id, found.quantity + count);
  } else {
    setCart([...cart, cartItem]);
  }
}
```

## 장바구니 중복 제한
```
const setQuantity = (id, quantity) => {
  const found = cart.filter((el) => el.id === id)[0];
  const idx = cart.indexOf(found);
  const cartItem = {
    id: product.id,
    image: product.image,
    name: product.name,
    price: product.price,
    provider: product.provider,
    quantity: quantity,
  };
  //js 배열은 ...배열 전후로 값 추가가능
  setCart([...cart.slice(0, idx), cartItem, ...cart.slice(idx + 1)])
}
```
*필터는 배열을 반환*

